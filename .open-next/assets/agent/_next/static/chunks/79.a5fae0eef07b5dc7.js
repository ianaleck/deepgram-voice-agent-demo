"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[79],{6079:function(e,t,r){let n;r.r(t),r.d(t,{default:function(){return P}});var c,s,a=r(7437),u=r(2265);let i=u["undefined"!=typeof document&&void 0!==document.createElement?"useLayoutEffect":"useEffect"];var l=e=>{let t=u.useRef(e);return u.useEffect(()=>{t.current=e}),t};function f(){}let o=e=>n||(n=function(e){let t=!1,r=[],n=new Map,c=new(e||window.ResizeObserver)((e,c)=>{r=r.concat(e),t||window.requestAnimationFrame(function(){let e=new Set;for(let t=0;t<r.length;t++){if(e.has(r[t].target))continue;e.add(r[t].target);let s=n.get(r[t].target);null==s||s.forEach(e=>e(r[t],c))}r=[],t=!1}),t=!0});return{observer:c,subscribe(e,t){var r;c.observe(e);let s=null!==(r=n.get(e))&&void 0!==r?r:[];s.push(t),n.set(e,s)},unsubscribe(e,t){var r;let s=null!==(r=n.get(e))&&void 0!==r?r:[];if(1===s.length){c.unobserve(e),n.delete(e);return}let a=s.indexOf(t);-1!==a&&s.splice(a,1),n.set(e,s)}}}(e));var d=function(e,t,r={}){let n=o(r.polyfill),c=l(t);return i(()=>{let t=!1,r=e&&"current"in e?e.current:e;if(!r)return f;function s(e,r){t||c.current(e,r)}return n.subscribe(r,s),()=>{t=!0,n.unsubscribe(r,s)}},[e,n,c]),n.observer},h=r(2298);let p=e=>Math.PI*e,g=(e,t,r)=>{let{x:n,y:c}=e;return{x:n+t*Math.cos(r),y:c+t*Math.sin(r)}},m=(e,t,r,n)=>{e.bezierCurveTo(t.x,t.y,r.x,r.y,n.x,n.y)},y=(e,t,r)=>r*(t-e)+e,w=e=>e<.5?2*e*e:1-Math.pow(-2*e+2,2)/2,x=e=>{let{width:t,height:r}=e.canvas.getBoundingClientRect();return{x:t/2,y:r/2}},E=(e,t,r,n,c)=>{let s=4/3*r*Math.tan(p(1/8)),a=x(e),u={x:a.x*(1+t.x),y:a.y*(1+t.y)};e.strokeStyle=c,e.beginPath();let i=n.angle+p(.5),l=n.angle+p(1.5);e.arc(u.x,u.y,r,i,l,!1);let f=g(u,r,l),o=r*n.depth*1.3,d=g(u,r-o,y(n.angle,p(3)-n.angle,n.depth)),h=g(u,r,i),w={cp1:g(f,s,l+p(.5)),cp2:g(d,s,n.angle+p(1.5))},E={cp1:g(d,s,n.angle+p(.5)),cp2:g(h,s,i+p(1.5))};m(e,w.cp1,w.cp2,d),m(e,E.cp1,E.cp2,h),e.stroke()},N=(e,t,r,n)=>{let c=x(e),s=c.x*(1-Math.cos(r)+t.x),a=c.y*(1-Math.sin(r)+t.y),u=c.x*(1+Math.cos(r)+t.x),i=c.y*(1+Math.sin(r)+t.y),l=e.createLinearGradient(s,a,u,i);return n.forEach(e=>{let{pct:t,color:r}=e;l.addColorStop(t,r)}),l};(c=s||(s={})).springGreen="#13ef93cc",c.springGreenLight="#b8f8d2cc",c.eucalyptus="#027a48cc",c.rose="#f185becc",c.lavender="#ba80f5cc",c.chryslerBlue="#3a00d3cc",c.azure="#149afbcc",c.transparent="transparent";let b=[{segments:[{pct:.42,color:"transparent"},{pct:.61,color:"#f185becc"}],startAngle:3.52,speedMultiplier:1.21,centerOffset:{x:.01,y:-.01},radiusOffset:.02,width:3.38},{segments:[{pct:.28,color:"#13ef93cc"},{pct:.62,color:"#f185becc"}],startAngle:1.59,speedMultiplier:.64,centerOffset:{x:-.03,y:-.01},radiusOffset:.05,width:2.39},{segments:[{pct:.31,color:"#027a48cc"},{pct:.66,color:"#3a00d3cc"}],startAngle:2.86,speedMultiplier:.94,centerOffset:{x:.02,y:.02},radiusOffset:-.06,width:2.64},{segments:[{pct:.16,color:"#3a00d3cc"},{pct:.62,color:"#027a48cc"},{pct:.75,color:"#ba80f5cc"}],startAngle:.65,speedMultiplier:1.23,centerOffset:{x:.01,y:0},radiusOffset:-.01,width:2.32},{segments:[{pct:.02,color:"#13ef93cc"},{pct:.8,color:"#149afbcc"}],startAngle:6.19,speedMultiplier:1.18,centerOffset:{x:-.04,y:.02},radiusOffset:.01,width:3.98},{segments:[{pct:.2,color:"transparent"},{pct:.47,color:"transparent"},{pct:.81,color:"#b8f8d2cc"}],startAngle:.49,speedMultiplier:.51,centerOffset:{x:.04,y:-.01},radiusOffset:-.04,width:1.19}],I=b.length,M=e=>1+(1.02-1)*Math.sin(e.current.time*p(1)/3/1e3)*y(1,0,e.current.deflation)*y(1,.33,e.current.focus),v=(e,t)=>{let r=e.slice(t,t+3);return r.reduce((e,t)=>e+t)/r.length},A=(e,t)=>y(1,1.15,v(e.current.agentNoise,t)),O=(e,t)=>y(1,.8695652173913044,v(e.current.userNoise,t)),S=(e,t,r,n)=>{t.current.time+=(n-r)*y(1,5,t.current.focus)*y(1,.5,t.current.deflation),e.clearRect(0,0,e.canvas.width,e.canvas.height),e.filter="saturate(150%)";let c=x(e),s=Math.min(c.x,c.y);b.forEach((r,n)=>{e.lineWidth=r.width,e.shadowColor=r.segments[0].color,e.shadowBlur=1.1*r.width;let c=.8*s*A(t,n)*O(t,n)*M(t),a=N(e,r.centerOffset,r.startAngle+t.current.time*p(1)/1e3/6*r.speedMultiplier,r.segments);E(e,r.centerOffset,(c+r.radiusOffset*c)*y(1,.5,w(t.current.focus)),{depth:w(t.current.deflation),angle:p(1.5)+p(Math.sin(t.current.time*p(1)/3/1e3)/18)},a)}),requestAnimationFrame(r=>{S(e,t,n,r)})},G=e=>{switch(e){case h.aI.LISTENING:case h.aI.THINKING:return 0;case h.aI.NONE:case h.aI.SLEEPING:return 1;case h.aI.SPEAKING:default:return 0}},L=e=>{switch(e){case h.aI.LISTENING:return 0;case h.aI.THINKING:return 1;case h.aI.SLEEPING:case h.aI.SPEAKING:default:return 0}},C=function(e,t,r,n){let c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:n;if(r.current.generation>e)return;let s=G(t);if(s<r.current.deflation){let e=(c-n)/300;r.current.deflation=Math.max(s,r.current.deflation-e)}else{let e=(c-n)/1e3;r.current.deflation=Math.min(s,r.current.deflation+e)}let a=L(t);if(a<r.current.focus){let e=(c-n)/1e3;r.current.focus=Math.max(a,r.current.focus-e)}else{let e=(c-n)/700;r.current.focus=Math.min(a,r.current.focus+e)}(r.current.deflation!==s||r.current.focus!==a)&&requestAnimationFrame(n=>{C(e,t,r,c,n)})};var q=e=>{let{width:t=0,height:r=0,agentVolume:n=0,userVolume:c=0}=e,{status:s}=(0,h.jq)(),i=(0,u.useRef)(null),l=(0,u.useRef)({generation:0,time:0,deflation:G(s),focus:L(s),agentNoise:Array(I+3).fill(n),userNoise:Array(I+3).fill(s===h.aI.SLEEPING?0:c)});return(0,u.useEffect)(()=>{if(i.current){let e=i.current.getContext("2d");if(e){let t=performance.now();requestAnimationFrame(r=>{S(e,l,t,r)})}}},[]),(0,u.useEffect)(()=>{l.current.generation+=1,requestAnimationFrame(e=>{C(l.current.generation,s,l,e)})},[s]),(0,u.useEffect)(()=>{l.current.agentNoise.shift(),l.current.agentNoise.push(n)},[n]),(0,u.useEffect)(()=>{s!==h.aI.SLEEPING&&(l.current.userNoise.shift(),l.current.userNoise.push(c))},[c,s]),(0,a.jsx)("canvas",{ref:i,width:t,height:r})},R=r(5176);let F=e=>{let[t,r]=(0,u.useState)(new DOMRect);return(0,u.useLayoutEffect)(()=>{(null==e?void 0:e.current)&&r(e.current.getBoundingClientRect())},[e]),d(e,e=>r(e.contentRect)),t};var P=e=>{let{agentVoiceAnalyser:t,userVoiceAnalyser:r,onOrbClick:n}=e,c=(0,u.useRef)(null),s=F(c),[i,l]=(0,u.useState)(0),[f,o]=(0,u.useState)(0);return(0,u.useEffect)(()=>{if(!t)return;let e=new Uint8Array(t.frequencyBinCount),r=()=>{l((0,R.FL)(t,e,48)),requestAnimationFrame(r)};r()},[t]),(0,u.useEffect)(()=>{if(!r)return;let e=new Uint8Array(r.frequencyBinCount),t=()=>{o((0,R.FL)(r,e,48)),requestAnimationFrame(t)};t()},[r]),(0,a.jsx)("div",{className:"flex items-center justify-center",children:(0,a.jsx)("button",{ref:c,onClick:n,className:"orb-animation",children:c.current&&(0,a.jsx)(q,{width:s.width,height:s.height,agentVolume:i,userVolume:f})})})}}}]);